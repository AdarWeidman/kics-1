package engine

import (
	"testing"

	"github.com/stretchr/testify/require"
)

func TestComputeSimilarityID_NotEqual(t *testing.T) {
	firstHash := computeSimilarityID("test.yaml", "My_Query_ID", "Resources.MyExample")
	secondHash := computeSimilarityID("test1.yaml", "My_Query_ID", "Resources.MyExample")
	require.NotEqual(t, firstHash, secondHash)

	firstHash = computeSimilarityID("test.yaml", "My_Query_ID", "Resources.MyExample")
	secondHash = computeSimilarityID("test.yaml", "My_Other_Query_ID", "Resources.MyExample")
	require.NotEqual(t, firstHash, secondHash)

	firstHash = computeSimilarityID("test.yaml", "My_Query_ID", "Resources.MyExample")
	secondHash = computeSimilarityID("test.yaml", "My_Query_ID", "Resources.MyOther.SearchKey")
	require.NotEqual(t, firstHash, secondHash)
}

func TestComputeSimilarityID_NotEmpty(t *testing.T) {
	hash := computeSimilarityID("test.yaml", "My_Query_ID", "Resources.MyExample")
	require.NotEmpty(t, hash)
}

func TestComputeSimilarityID_Equal(t *testing.T) {
	filePath := "test.yaml"
	queryID := "My_Query_ID"
	searchKey := "Resources.MyExample"
	firstHash := computeSimilarityID(filePath, queryID, searchKey)
	secondHash := computeSimilarityID(filePath, queryID, searchKey)

	require.Equal(t, firstHash, secondHash)
}
